generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Department {
  id           Int           @id @default(autoincrement())
  name         String
  Designations Designation[]
}

model User {
  id         Int         @id @default(autoincrement())
  name       String      @db.VarChar(255)
  email      String      @unique
  role       String      @db.VarChar(255)
  degn       Designation @relation(fields: [degnid], references: [id])
  degnid     Int
  gender     String      @default("Male")
  UserSkills UserSkill[]
  password   String      @db.VarChar(255)
}

model Designation {
  id               Int                @id @default(autoincrement())
  name             String             @unique
  dept             Department         @relation(fields: [deptid], references: [id])
  deptid           Int
  Users            User[]
  DesignationSkill DesignationSkill[]
}

model Skill {
  id               Int                @id @default(autoincrement())
  name             String             @db.VarChar(255)
  desc             String?
  UserSkills       UserSkill[]
  DesignationSkill DesignationSkill[]
}

model DesignationSkill {
  id      Int         @id @default(autoincrement())
  degn    Designation @relation(fields: [degnid], references: [id])
  degnid  Int
  Skill   Skill       @relation(fields: [skillId], references: [id])
  skillId Int
}

model UserSkill {
  id        Int      @id @default(autoincrement())
  user      User     @relation(fields: [userid], references: [id])
  userid    Int
  skill     Skill    @relation(fields: [skillid], references: [id])
  skillid   Int
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  level     Int
}

// npx prisma migrate dev --name init
